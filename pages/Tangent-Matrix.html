<!DOCTYPE html>
<html lang="en" class="h-full bg-zinc-900">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tangent Matrix VTT</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        zinc: {
                            50: '#fafafa', 100: '#f4f4f5', 200: '#e4e4e7', 300: '#d4d4d8',
                            400: '#a1a1aa', 500: '#71717a', 600: '#52525b', 700: '#3f3f46',
                            800: '#27272a', 900: '#18181b', 950: '#09090b',
                        },
                    }
                },
            },
        }
    </script>
    <link rel="stylesheet" href="../css/tm-style.css">
</head>
<body class="h-full font-sans text-zinc-200">

    <!-- This container is hidden by default and was previously used for the login screen -->
    <div id="login-container-wrapper" class="hidden"></div>

    <!-- Main VTT Application Wrapper -->
    <div id="vtt-app-wrapper" class="flex h-full w-full">
        <!-- Main Content Area -->
        <main class="flex-grow relative bg-zinc-800">
            <div id="map-container" class="w-full h-full">
                <!-- Tokens will be rendered here by JavaScript -->
            </div>
        </main>

        <!-- Sidebar -->
        <aside class="w-80 bg-zinc-900 flex flex-col p-2">
            <!-- Header with Controls -->
            <div class="flex justify-between items-center mb-4 p-2">
                <h2 class="text-xl font-bold">Controls</h2>
                <div>
                    <button id="file-menu-button" class="p-2 rounded hover:bg-zinc-700">File</button>
                    <div id="file-menu-dropdown" class="absolute hidden bg-zinc-800 rounded shadow-lg mt-2 py-1 z-10">
                        <a href="#" id="save-button" class="block px-4 py-2 text-sm text-zinc-200 hover:bg-zinc-700">Save Project</a>
                        <a href="#" id="load-button" class="block px-4 py-2 text-sm text-zinc-200 hover:bg-zinc-700">Load Project</a>
                    </div>
                    <button id="settings-button" class="p-2 rounded hover:bg-zinc-700">Settings</button>
                    <button id="sign-out" class="p-2 rounded hover:bg-zinc-700" style="display: none;">Sign Out</button>
                </div>
            </div>

            <!-- Accordion Sections -->
            <div class="flex-grow overflow-y-auto">
                <!-- Tokens Section -->
                <div class="mb-2">
                    <h3 class="collapsible-header text-lg font-semibold p-2 bg-zinc-800 rounded cursor-pointer">Tokens</h3>
                    <div class="collapsible-content p-2">
                        <input type="text" id="token-name" placeholder="Token Name" class="w-full bg-zinc-700 p-2 rounded mb-2">
                        <button id="add-token" class="w-full bg-blue-600 p-2 rounded hover:bg-blue-700">Add Token</button>
                        <button id="clear-map" class="w-full bg-red-600 p-2 rounded hover:bg-red-700 mt-2">Clear All</button>
                    </div>
                </div>
                <!-- Chat/Log Section -->
                <div class="mb-2">
                    <h3 class="collapsible-header text-lg font-semibold p-2 bg-zinc-800 rounded cursor-pointer">Message Log</h3>
                    <div id="message-log" class="collapsible-content h-48 bg-zinc-800/50 p-2 overflow-y-scroll mb-2"></div>
                    <form id="chat-form" class="flex">
                        <input type="text" id="chat-input" class="flex-grow bg-zinc-700 p-2 rounded-l" placeholder="Type message or /roll...">
                        <button type="submit" class="bg-indigo-600 p-2 rounded-r hover:bg-indigo-700">Send</button>
                    </form>
                </div>
            </div>
        </aside>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center hidden z-20">
        <div class="bg-zinc-800 rounded-lg shadow-xl p-6 w-full max-w-md">
            <h2 class="text-xl font-bold mb-4">Settings</h2>
            <div class="mb-4">
                <label for="mode-toggle" class="block mb-2">Application Mode</label>
                <select id="mode-toggle" class="w-full bg-zinc-700 p-2 rounded">
                    <option value="cloud">Cloud</option>
                    <option value="local">Local</option>
                </select>
            </div>
            <div class="mb-4">
                <label for="local-user-id" class="block mb-2">Local User ID</label>
                <input type="text" id="local-user-id" class="w-full bg-zinc-700 p-2 rounded">
            </div>
            <button id="close-settings-button" class="w-full bg-indigo-600 p-2 rounded hover:bg-indigo-700">Close</button>
        </div>
    </div>
    
    <script type="module" src="../js/tm-app.js"></script>
</body>
</html>
